<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Security-Policy"
  content="default-src 'none'; style-src 'self' 'unsafe-inline'; font-src 'self'; img-src data: blob:; script-src 'self';">
<title>SurfView</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body tabindex="-1">
<div class="shell">

  <!-- TITLEBAR -->
  <div class="titlebar">
    <div class="titlebar-logo">SURF<span>VIEW</span></div>
    <div class="shield-badge" id="shieldBadge">
      <div class="shield-dot" id="shieldDot"></div>
      <span id="shieldLabel">SAFE MODE</span>
    </div>
    <div id="bookmarks">
        <ul id="bookmarks-ul">
        </ul>
    </div>
    <div class="spacer"></div>
    <div class="mode-toggle">
      <span id="modeLabel">image mode</span>
      <label class="toggle-switch">
        <input type="checkbox" checked id="imageModeToggle">
        <div class="toggle-track"></div>
        <div class="toggle-thumb"></div>
      </label>
    </div>
  </div>

  <!-- URL BAR -->
  <div class="urlbar">
    <button class="btn btn-icon" id="btnBack" title="Back" disabled>&#8592;</button>
    <button class="btn btn-icon" id="btnFwd" title="Forward" disabled>&#8594;</button>
    <button class="btn btn-icon" id="btnReload" title="Reload">&#8635;</button>
    <div class="urlbar-input-wrap">
      <span class="urlbar-prefix">https://</span>
      <input class="urlbar-input" id="urlInput" type="text"
        placeholder="enter a url and press enter"
        autocomplete="off"
        spellcheck="false">
    </div>
    <button class="btn btn-primary" id="btnRender">render</button>
    <button class="btn btn-primary" id="btnBookmark">&#128278;</button>
  </div>

  <!-- MAIN -->
  <div class="main">

    <!-- VIEWPORT -->
    <div class="viewport" id="viewport">
      <div class="viewport-inner" id="viewportInner">

        <div class="empty-state" id="emptyState">
          <div class="empty-icon">&#9681;</div>
          <div class="empty-title">no page loaded</div>
          <div class="empty-sub">enter a url above. the page will be rendered to a static image. no scripts will execute.</div>
        </div>

        <div class="loading-state" id="loadingState">
          <div class="loader-ring"></div>
          <div class="loading-steps">
            <div class="loading-step" id="step1">fetch url</div>
            <div class="loading-step" id="step2">spawn renderer</div>
            <div class="loading-step" id="step3">capture image</div>
            <div class="loading-step" id="step4">extract links</div>
            <div class="loading-step" id="step5">close renderer</div>
          </div>
        </div>

        <div class="error-state" id="errorState">
          <span>&#9888; render failed</span>
          <div class="error-msg" id="errorMsg"></div>
        </div>

        <div class="page-image-wrap" id="pageImageWrap">
          <img class="page-image" id="pageImage" src="" alt="rendered page">
        </div>

        <div class="live-wrap" id="liveWrap">
          <div class="live-warning" id="liveWarning">
            <span style="color:var(--danger)">&#9888;</span>
            live mode active - scripts are running - this is a real browser
            <button class="live-warning-close" id="liveWarningClose">x</button>
          </div>
          <webview id="liveWebview" src="about:blank" style="width:100%;flex:1;min-height:0;"></webview>
        </div>

      </div>
    </div>

    <div class="resize-handle" id="resizeHandle"></div>

    <!-- SIDE PANEL -->
    <div class="side-panel" id="sidePanel">
      <div class="panel-header">
        <div class="panel-title">links</div>
        <div class="link-count" id="linkCount">0</div>
      </div>

      <div class="panel-tabs">
        <div class="panel-tab active" data-tab="all">all</div>
        <div class="panel-tab" data-tab="external">ext</div>
        <div class="panel-tab" data-tab="internal">int</div>
        <div class="panel-tab" data-tab="other">other</div>
      </div>

      <div class="panel-filter">
        <input class="filter-input" id="filterInput" placeholder="filter links...">
      </div>

      <div class="link-list" id="linkList">
        <div class="panel-empty">
          <span style="font-size:20px;opacity:0.3">&#9135;</span>
          no links yet
        </div>
      </div>
    </div>

  </div>

  <!-- STATUS BAR -->
  <div class="statusbar">
    <div class="status-item status-ok" id="statusSafe">&#10003; scripts blocked</div>
    <div class="status-item" id="statusDomain">--</div>
    <div class="status-item" id="statusTitle" style="max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"></div>
    <div class="spacer"></div>
    <div class="status-item" id="statusLinks">0 links</div>
    <div class="status-item" id="statusRenderTime"></div>
  </div>

</div>

<div id="confirmBox">
  <span id="confirmMsg" style="margin-left:12px;float:left;"></span>
  <button id="confirmYes" class="btn btn-primary" style="margin-left:12px;float:left;">Remove</button>
  <button id="confirmNo" class="btn btn-primary" style="margin-left:6px;float:left;">Cancel</button>
</div>

<script src="renderer.js"></script>
</body>
</html>